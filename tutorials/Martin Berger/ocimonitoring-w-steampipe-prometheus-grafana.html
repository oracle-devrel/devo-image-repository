<article class="page has-sidebar has-toc has-slides" itemscope="" itemtype="https://schema.org/CreativeWork">

    <div class="page__inner-wrap">

        <section class="page__content" itemprop="text">

            <div class="slides" id="slideshow">

                <div class="slide active" id="slide-0">

                    <h2 class="slide__title"><span class="slide__num">1</span> Introduction</h2>

                    <blockquote class="notice">
                        <p><strong>Note:</strong> This is an experimental environment. Feel free to try it, extend it,
                            but most importantly, have fun with it!</p>
                    </blockquote>

                    <p>In this walkthrough, you’ll install a basic Oracle Cloud Infrastructure (OCI) monitoring solution
                        with these components based on Ansible in Oracle Linux 8.</p>

                    <p><strong>The setup is tested for:</strong></p>

                    <ul>
                        <li>OL8 running in ESXi</li>
                        <li>OL8 running in local VMware Workstation with NAT</li>
                        <li>OL8 running in Oracle Cloud Infrastructure</li>
                    </ul>

                    <p><strong>Installed components by Ansible roles:</strong></p>

                    <ul>
                        <li>Docker</li>
                        <li><a href="https://steampipe.io/">Steampipe</a></li>
                        <li><a href="https://grafana.com/">Grafana</a></li>
                        <li><a href="https://prometheus.io/">Prometheus</a></li>
                        <li>Push Gateway</li>
                        <li>PostgreSQL</li>
                    </ul>

                    <p><strong>How it works:</strong></p>

                    <figure class="">
                        <picture>
                            <source
                                srcset="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-architecture.png 1x">
                            <img class="noBorder" loading="lazy"
                                src="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-architecture.png"
                                data-original="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-architecture.png"
                                data-at2x="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-architecture@2x.png"
                                title="Architecture" alt="Architecture Overview">
                        </picture>
                    </figure>

                    <ol>
                        <li>Execute the Python script</li>
                        <li>Steampipe gathers the information from Oracle Cloud Infrastructure</li>
                        <li>The return value is pushed to Prometheus Push Gateway</li>
                        <li>Prometheus scrapes the metrics from the gateway</li>
                        <li>Grafana reads the metrics from Prometheus</li>
                    </ol>

                    <p><br><strong>For more information, see:</strong></p>

                    <ul>
                        <li><a
                                href="https://docs.oracle.com/iaas/Content/GSG/Tasks/signingup.htm?source=:ex:tb:::::WWMK211125P00018:WW_FY22_DevRel_DotBuild&amp;SC=:ex:tb:::::WWMK211125P00018:WW_FY22_DevRel_DotBuild&amp;pcode=WWMK211125P00018">Signing
                                Up for Oracle Cloud Infrastructure</a></li>
                        <li><a
                                href="https://docs.oracle.com/en-us/iaas/Content/API/Concepts/cloudshellintro.htm?source=:ex:tb:::::WWMK211125P00018:WW_FY22_DevRel_DotBuild&amp;SC=:ex:tb:::::WWMK211125P00018:WW_FY22_DevRel_DotBuild&amp;pcode=WWMK211125P00018">Getting
                                started with OCI Cloud Shell</a></li>
                        <li><a
                                href="https://docs.oracle.com/en-us/iaas/Content/API/Concepts/cliconcepts.htm?source=:ex:tb:::::WWMK211125P00018:WW_FY22_DevRel_DotBuild&amp;SC=:ex:tb:::::WWMK211125P00018:WW_FY22_DevRel_DotBuild&amp;pcode=WWMK211125P00018">OCI
                                CLI</a></li>
                    </ul>

                </div>

                <div class="slide" id="slide-1">

                    <h2 class="slide__title"><span class="slide__num">2</span> Prerequisites</h2>

                    <ul>
                        <li>root access by password</li>
                        <li><code class="language-plaintext highlighter-rouge">/etc/hosts</code> configured</li>
                        <li>Ansible and Git configured</li>
                        <li>Internet access</li>
                        <li>Oracle Cloud Infrastructure user with inspect permissions, including SSH PEM key and
                            configuration</li>
                    </ul>

                    <h3 id="software-installation-ol8-esxi--ol8-vmware">Software installation: OL8 ESXi / OL8 VMware<a
                            class="header-link" href="#software-installation-ol8-esxi--ol8-vmware"
                            title="Permalink"><span class="sr-only">Permalink</span><i class="fas fa-link"></i></a></h3>

                    <p>As user <code class="language-plaintext highlighter-rouge">root</code>:</p>

                    <div class="language-console highlighter-rouge">
                        <div class="highlight">
                            <pre class="highlight"><code><span class="go">yum -y install yum-utils
yum -y install oracle-epel-release-el8
yum-config-manager --enable ol8_developer_EPEL
yum -y install ansible git
</span></code></pre>
                        </div>
                    </div>

                    <h3 id="software-installation-ol8-oracle-cloud-infrastructure">Software installation: OL8 Oracle
                        Cloud Infrastructure<a class="header-link"
                            href="#software-installation-ol8-oracle-cloud-infrastructure" title="Permalink"><span
                                class="sr-only">Permalink</span><i class="fas fa-link"></i></a></h3>

                    <p>As user <code class="language-plaintext highlighter-rouge">opc</code>:</p>

                    <div class="language-console highlighter-rouge">
                        <div class="highlight">
                            <pre class="highlight"><code><span class="go">sudo dnf upgrade
sudo dnf -y install oracle-epel-release-el8
sudo dnf config-manager --enable ol8_developer_EPEL
sudo dnf -y install ansible git
</span></code></pre>
                        </div>
                    </div>

                    <h3 id="ansible-ssh-configuration-for-oracle-cloud-infrastructure">Ansible SSH configuration for
                        Oracle Cloud Infrastructure<a class="header-link"
                            href="#ansible-ssh-configuration-for-oracle-cloud-infrastructure" title="Permalink"><span
                                class="sr-only">Permalink</span><i class="fas fa-link"></i></a></h3>

                    <ul>
                        <li>Upload the <code class="language-plaintext highlighter-rouge">opc</code>’s SSH private key
                            to <code class="language-plaintext highlighter-rouge">/home/opc/.ssh</code> temporarily for
                            installaton purposes</li>
                        <li>
                            Change the Ansible checked out hosts file to:

                            <div class="language-console highlighter-rouge">
                                <div class="highlight">
                                    <pre class="highlight"><code><span class="go">  [all:vars]
</span><span class="gp">  ansible_ssh_private_key_file=/home/opc/.ssh/&lt;your_ssh_key_file_name_here&gt;</span><span class="w">
</span><span class="go">
  [monitoring]
</span><span class="gp">  &lt;your_oci_compute_private_instance_here&gt;</span><span class="w"> </span><span class="nv">ansible_user</span><span class="o">=</span>opc <span class="nv">ansible_python_interpreter</span><span class="o">=</span><span class="s2">"/usr/bin/env python3"</span>
</code></pre>
                                </div>
                            </div>
                        </li>
                    </ul>

                    <blockquote class="alert">
                        <p>After the installation, it’s a good practice to remove the opc private key from your compute
                            instance</p>
                    </blockquote>

                </div>

                <div class="slide" id="slide-2">

                    <h2 class="slide__title"><span class="slide__num">3</span> Steps</h2>

                    <ol>
                        <li>Login to Oracle Linux 8 as <code class="language-plaintext highlighter-rouge">root</code>
                        </li>
                        <li>Clone the repository to a local folder such as <code
                                class="language-plaintext highlighter-rouge">/root/git</code></li>
                        <li>Change to subdirectory <code
                                class="language-plaintext highlighter-rouge">oci-monitoring</code></li>
                        <li>Update the Ansible <code class="language-plaintext highlighter-rouge">hosts</code> file with
                            your IP and root password. <code
                                class="language-plaintext highlighter-rouge">ansible_ssh_pass</code> is required for
                            local connections</li>
                        <li>Run <code
                                class="language-plaintext highlighter-rouge">ansible-galaxy collection install -r roles/requirements.yml</code>
                        </li>
                        <li>Run <code class="language-plaintext highlighter-rouge">ansible-playbook install.yml</code>
                        </li>
                        <li>
                            As <code class="language-plaintext highlighter-rouge">root</code>, verify that all Docker
                            containers are running:

                            <div class="language-console highlighter-rouge">
                                <div class="highlight">
                                    <pre class="highlight"><code><span class="go">   docker ps
</span></code></pre>
                                </div>
                            </div>

                            <p>Your output should be something like:</p>

                            <div class="language-console highlighter-rouge">
                                <div class="highlight">
                                    <pre class="highlight"><code><span class="go">   CONTAINER ID   IMAGE              COMMAND                  CREATED             STATUS             PORTS                    NAMES
</span><span class="gp">   f7f2e137f4a1   prom/pushgateway   "/bin/pushgateway"       About an hour ago   Up About an hour   0.0.0.0:9091-&gt;</span>9091/tcp   pushgateway
<span class="gp">   c6ecc72065c9   prom/prometheus    "/bin/prometheus --c…"   About an hour ago   Up About an hour   0.0.0.0:9090-&gt;</span>9090/tcp   prometheus
<span class="gp">   3485de8cc1f9   grafana/grafana    "/run.sh"                About an hour ago   Up About an hour   0.0.0.0:3000-&gt;</span>3000/tcp   grafana
<span class="gp">   8e821aa0044b   turbot/steampipe   "docker-entrypoint.s…"   About an hour ago   Up 30 minutes      0.0.0.0:9193-&gt;</span>9193/tcp   steampipe
</code></pre>
                                </div>
                            </div>
                        </li>
                    </ol>

                    <h3 id="network-security">Network security<a class="header-link" href="#network-security"
                            title="Permalink"><span class="sr-only">Permalink</span><i class="fas fa-link"></i></a></h3>

                    <p>The Ansible playbooks also open these ports in the VM for troubleshooting access:</p>

                    <ul>
                        <li>3000: Grafana</li>
                        <li>9090: Prometheus</li>
                        <li>9091: Prometheus Push Gateway</li>
                        <li>9093: Steampipe Service</li>
                    </ul>

                </div>

                <div class="slide" id="slide-3">

                    <h2 class="slide__title"><span class="slide__num">4</span> OCI configuration</h2>

                    <ol>
                        <li>After the successful Ansible execution, put your personal OCI configuration and SSH key into
                            the directory <code
                                class="language-plaintext highlighter-rouge">/home/steampipe/.oci</code>.</li>
                        <li>Replace the dummy values.</li>
                        <li>
                            Update the file <code
                                class="language-plaintext highlighter-rouge">/home/steampipe/config/oci.spc</code>
                            with the correct SSH key file name:

                            <blockquote class="notice">
                                <p><strong>Note:</strong> Take care that both the owner and group of the OCI
                                    configuration file is <code
                                        class="language-plaintext highlighter-rouge">steampipe</code></p>
                            </blockquote>

                            <p>Example:</p>

                            <ol>
                                <li>
                                    <p>Check the current directory:</p>

                                    <div class="language-console highlighter-rouge">
                                        <div class="highlight">
                                            <pre class="highlight"><code><span class="go">   pwd
</span></code></pre>
                                        </div>
                                    </div>

                                    <p>Your output should be:</p>

                                    <div class="language-console highlighter-rouge">
                                        <div class="highlight">
                                            <pre class="highlight"><code><span class="go">   /home/steampipe/.oci
</span></code></pre>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <p>Verify contents of the directory:</p>

                                    <div class="language-console highlighter-rouge">
                                        <div class="highlight">
                                            <pre class="highlight"><code><span class="go">   ls -l
</span></code></pre>
                                        </div>
                                    </div>

                                    <p>Your output should be something like:</p>

                                    <div class="language-console highlighter-rouge">
                                        <div class="highlight">
                                            <pre class="highlight"><code><span class="go">   total 8
   -rw-r--r--. 1 steampipe steampipe  307 Aug  9 09:01 config
   -rw-r--r--. 1 steampipe steampipe 1730 Aug  9 09:01 jurasuedfuss-20210809.pem
</span></code></pre>
                                        </div>
                                    </div>
                                </li>
                            </ol>
                        </li>
                        <li>
                            Restart the Docker container for Steampipe:

                            <div class="language-console highlighter-rouge">
                                <div class="highlight">
                                    <pre class="highlight"><code><span class="go">   docker stop steampipe
   docker start steampipe
</span></code></pre>
                                </div>
                            </div>
                        </li>
                    </ol>

                </div>

                <div class="slide" id="slide-4">

                    <h2 class="slide__title"><span class="slide__num">5</span> How to create the user for OCI access
                        using the OCI CLI</h2>

                    <p>Next we’ll create an <code class="language-plaintext highlighter-rouge">OCI</code> user for
                        monitoring. For use in this section:</p>

                    <ul>
                        <li>An existing OCI CLI setup for an tenant administrator is required to execute these steps.
                        </li>
                        <li>The required SSH key in PEM format can be downloaded from the OCI web interface.</li>
                        <li>The <code class="language-plaintext highlighter-rouge">user</code>, <code
                                class="language-plaintext highlighter-rouge">group</code>, and <code
                                class="language-plaintext highlighter-rouge">policy</code> can be created inthe web
                            interface as well.</li>
                    </ul>

                    <p>Now, all we need for Steampipe is the OCI config file for the new user and their SSH key in PEM
                        format.</p>

                    <h3 id="create-user">Create User<a class="header-link" href="#create-user" title="Permalink"><span
                                class="sr-only">Permalink</span><i class="fas fa-link"></i></a></h3>

                    <div class="language-console highlighter-rouge">
                        <div class="highlight">
                            <pre class="highlight"><code><span class="go">oci iam user create --name oci_user_readonly --description "OCI User with inspect all-resources."
</span></code></pre>
                        </div>
                    </div>

                    <h3 id="create-group">Create Group<a class="header-link" href="#create-group"
                            title="Permalink"><span class="sr-only">Permalink</span><i class="fas fa-link"></i></a></h3>

                    <div class="language-console highlighter-rouge">
                        <div class="highlight">
                            <pre class="highlight"><code><span class="go">oci iam group create --name oci_group_readonly --description "OCI Group with inspect all-resources."
</span></code></pre>
                        </div>
                    </div>

                    <h3 id="add-user-to-group">Add User to Group<a class="header-link" href="#add-user-to-group"
                            title="Permalink"><span class="sr-only">Permalink</span><i class="fas fa-link"></i></a></h3>

                    <div class="language-console highlighter-rouge">
                        <div class="highlight">
                            <pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>oci iam group add-user <span class="se">\</span>
<span class="gp">--user-id &lt;your user OCID from created user above&gt;</span><span class="w"> </span><span class="se">\</span>
<span class="gp">--group-id &lt;your group OCID from created group above&gt;</span><span class="w">
</span></code></pre>
                        </div>
                    </div>

                    <h3 id="create-policy">Create Policy<a class="header-link" href="#create-policy"
                            title="Permalink"><span class="sr-only">Permalink</span><i class="fas fa-link"></i></a></h3>

                    <div class="language-console highlighter-rouge">
                        <div class="highlight">
                            <pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>oci iam policy create <span class="se">\</span>
<span class="gp">--compartment-id &lt;your tenancy OCID&gt;</span><span class="w"> </span><span class="se">\</span>
<span class="go">--name oci_policy_readonly \
--description "OCI Policy with inspect all-resources." \
--statements '[ "allow group oci_group_readonly to inspect all-resources on tenancy" ]'
</span></code></pre>
                        </div>
                    </div>

                    <h3 id="add-api-key">Add API Key<a class="header-link" href="#add-api-key" title="Permalink"><span
                                class="sr-only">Permalink</span><i class="fas fa-link"></i></a></h3>

                    <ol>
                        <li>
                            Add your API key:<br>

                            <picture class="">
                                <source
                                    srcset="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-api-key.png 1x">
                                <img loading="lazy"
                                    src="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-api-key.png"
                                    data-original="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-api-key.png"
                                    data-at2x="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-api-key@2x.png"
                                    alt="OCI API Key 01" title="OCI API Key 01">
                            </picture>
                        </li>
                        <li>
                            Download the created private key in PEM format:

                            <picture class="">
                                <source
                                    srcset="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-add-api-key.png 1x">
                                <img loading="lazy"
                                    src="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-add-api-key.png"
                                    data-original="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-add-api-key.png"
                                    data-at2x="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-add-api-key@2x.png"
                                    alt="OCI API Key 02" title="OCI API Key 02">
                            </picture>
                        </li>
                        <li>
                            Copy the configuration file preview. The values are used for the Steampipe OCI configuration.

                            <picture class="">
                                <source
                                    srcset="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-config-file-prev.png 1x">
                                <img  loading="lazy"
                                    src="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-config-file-prev.png"
                                    data-original="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-config-file-prev.png"
                                    data-at2x="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-config-file-prev@2x.png"
                                    alt="OCI API Key 03" title="OCI API Key 03">
                            </picture>
                        </li>
                    </ol>


                </div>

                <div class="slide" id="slide-5">

                    <h2 class="slide__title"><span class="slide__num">6</span> Steampipe</h2>

                    <h3 id="oci-regions">OCI Regions<a class="header-link" href="#oci-regions" title="Permalink"><span
                                class="sr-only">Permalink</span><i class="fas fa-link"></i></a></h3>

                    <p>To filter your regions, just edit the file <code
                            class="language-plaintext highlighter-rouge">/home/steampipe/config/oci.spc</code>.</p>

                    <p>For example:</p>

                    <div class="language-json highlighter-rouge">
                        <div class="highlight">
                            <pre class="highlight"><code><span class="err">connection</span><span class="w"> </span><span class="s2">"oci_tenant_kestenholz"</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="err">plugin</span><span class="w">                </span><span class="err">=</span><span class="w"> </span><span class="s2">"oci"</span><span class="w">
  </span><span class="err">config_file_profile</span><span class="w">   </span><span class="err">=</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="w">          </span><span class="err">#</span><span class="w"> </span><span class="err">Name</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">profile</span><span class="w">
  </span><span class="err">config_path</span><span class="w">           </span><span class="err">=</span><span class="w"> </span><span class="s2">"~/.oci/config"</span><span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="err">Path</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">config</span><span class="w"> </span><span class="err">file</span><span class="w">
  </span><span class="err">regions</span><span class="w">               </span><span class="err">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"eu-frankfurt-1"</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s2">"eu-zurich-1"</span><span class="p">]</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">List</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">regions</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
                        </div>
                    </div>

                    <h4 id="test-steampipe">Test Steampipe<a class="header-link" href="#test-steampipe"
                            title="Permalink"><span class="sr-only">Permalink</span><i class="fas fa-link"></i></a></h4>

                    <p>Here are some commands to verify if Steampipe is working as expected:</p>

                    <blockquote class="notice">
                        <p><strong>Note:</strong> All commands need to be executed as <strong><code
                                    class="language-plaintext highlighter-rouge">root</code></strong>.</p>
                    </blockquote>

                    <ul>
                        <li>
                            <strong>list plugins</strong>

                            <div class="language-console highlighter-rouge">
                                <div class="highlight">
                                    <pre class="highlight"><code><span class="go">  docker exec -it steampipe steampipe plugin list
</span></code></pre>
                                </div>
                            </div>

                            <p>Your output should look something like:</p>

                            <div class="language-console highlighter-rouge">
                                <div class="highlight">
                                    <pre class="highlight"><code><span class="go">  +--------------------------------------------+---------+-----------------------+
  | Name                                       | Version | Connections           |
  +--------------------------------------------+---------+-----------------------+
  | hub.steampipe.io/plugins/turbot/oci@latest | 0.1.0   | oci_tenant_kestenholz |
  +--------------------------------------------+---------+-----------------------+
</span></code></pre>
                                </div>
                            </div>
                        </li>
                        <li>
                            <strong>confirm <code class="language-plaintext highlighter-rouge">RUNNING</code>
                                state</strong>

                            <div class="language-console highlighter-rouge">
                                <div class="highlight">
                                    <pre class="highlight"><code><span class="go">  docker exec -it steampipe steampipe \
</span><span class="gp">  query "select display_name,shape,region from oci_core_instance where lifecycle_state='RUNNING';</span><span class="s2">"
</span></code></pre>
                                </div>
                            </div>

                            <p>Your output should look something like:</p>

                            <div class="language-console highlighter-rouge">
                                <div class="highlight">
                                    <pre class="highlight"><code><span class="go">  +-----------------------------------+------------------------+----------------+
  | display_name                      | shape                  | region         |
  +-----------------------------------+------------------------+----------------+
  | Instance-DB-1                     | VM.Standard1.2         | eu-frankfurt-1 |
  | Instance-AS-1                     | VM.Standard1.1         | eu-frankfurt-1 |
  +-----------------------------------+------------------------+----------------+
</span></code></pre>
                                </div>
                            </div>
                        </li>
                        <li>
                            <strong>confirm home region</strong>

                            <div class="language-console highlighter-rouge">
                                <div class="highlight">
                                    <pre class="highlight"><code><span class="go">  docker exec -it steampipe steampipe \
</span><span class="gp">  query "select key,title,status from oci_region where is_home_region=true;</span><span class="s2">"
</span></code></pre>
                                </div>
                            </div>

                            <p>Your output should look something like:</p>

                            <div class="language-console highlighter-rouge">
                                <div class="highlight">
                                    <pre class="highlight"><code><span class="go">  +-----+----------------+--------+
  | key | title          | status |
  +-----+----------------+--------+
  | FRA | eu-frankfurt-1 | READY  |
  +-----+----------------+--------+
</span></code></pre>
                                </div>
                            </div>
                        </li>
                    </ul>

                </div>

                <div class="slide" id="slide-6">

                    <h2 class="slide__title"><span class="slide__num">7</span> Python Example Scripts</h2>

                    <p>In the subdirectory <code class="language-plaintext highlighter-rouge">/home/steampipe/py</code>,
                        there are two basic examples of how to get the data from the Steampipe PostgreSQL service to
                        Python3. Feel free to adapt the queries and files as needed. Also, keep in mind that the
                        returned values are pushed to the Prometheus Gateway on <code
                            class="language-plaintext highlighter-rouge">port 9091</code> for further usage.</p>

                    <table>
                        <thead>
                            <tr>
                                <th>Script</th>
                                <th>Purpose</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>pgsql-query-bv-zurich.py</td>
                                <td>Summary of Block Volume in OCI Region Zurich</td>
                            </tr>
                            <tr>
                                <td>pgsql-query-ci-running-zurich.py</td>
                                <td>Summary of running Instances in OCI Region Zurich</td>
                            </tr>
                        </tbody>
                    </table>

                    <blockquote class="alert">
                        <p>Currently, you’ll need to restart the Docker container <em>before</em> executing Python3
                            according to the error generated by running these scripts. In future iterations, we hope to
                            have a solution, but right now this is an easy fix!</p>
                    </blockquote>

                    <ol>
                        <li>
                            Manual execution and upload of the query result:

                            <div class="language-console highlighter-rouge">
                                <div class="highlight">
                                    <pre class="highlight"><code><span class="go">   python3 pgsql-query-ci-running-zurich.py
   python3 pgsql-query-bv-zurich.py
</span></code></pre>
                                </div>
                            </div>

                            <p>These will return the error noted above:</p>

                            <div class="language-console highlighter-rouge">
                                <div class="highlight">
                                    <pre class="highlight"><code><span class="go">   Something went wrong: no connection config loaded for connection 'oci'
</span></code></pre>
                                </div>
                            </div>
                        </li>
                        <li>
                            Restarting Steampipe as <code class="language-plaintext highlighter-rouge">root</code>:


                            <div class="language-console highlighter-rouge">
                                <div class="highlight">
                                    <pre class="highlight"><code><span class="go">   docker stop steampipe
   docker start steampipe
</span></code></pre>
                                </div>
                            </div>
                        </li>
                    </ol>

                </div>

                <div class="slide" id="slide-7">

                    <h2 class="slide__title"><span class="slide__num">8</span> Prometheus Push Gateway</h2>

                    <p>According to the Python script, new data is passed to the <strong>Prometheus Push
                            Gateway</strong> on <code class="language-plaintext highlighter-rouge">port 9091</code> and
                        scraped by Prometheus <code class="language-plaintext highlighter-rouge">port 9090</code>.</p>

                    <p>Check out this example for the Prometheus Gateway where data is loaded by jobs <code
                            class="language-plaintext highlighter-rouge">oci_blockvolume_</code> and <code
                            class="language-plaintext highlighter-rouge">_oci_compute</code>:</p>

                    <picture class="">
                        <source
                            srcset="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-pushgateway.png 1x">
                        <img loading="lazy"
                            src="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-pushgateway.png"
                            data-original="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-pushgateway.png"
                            data-at2x="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-pushgateway@2x.png"
                            alt="OCI Prometheus Push Gateway 01" title="OCI Prometheus Push Gateway 01">
                    </picture>



                </div>

                <div class="slide" id="slide-8">

                    <h2 class="slide__title"><span class="slide__num">9</span> Grafana</h2>

                    <p>Grafana is reachable by address on <code
                            class="language-plaintext highlighter-rouge">port 3000</code> of your machine (e.g., <code
                            class="language-plaintext highlighter-rouge">your-machine-ip:3000</code>).</p>

                    <p>The default login and password is:</p>

                    <ul>
                        <li>Username: <code class="language-plaintext highlighter-rouge">admin</code></li>
                        <li>Password: <code class="language-plaintext highlighter-rouge">welcome1</code></li>
                    </ul>

                    <p>The Prometheus data source and a basic dashboard are deployed during the Grafana Docker setup
                        process.</p>

                    <ul>
                        <li>
                            Here’s an example for dashboard <strong>OCI Demo - eu-zurich-1</strong>:

                            <figure class="">
                                <picture>
                                    <source
                                        srcset="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-grafana.png 1x">
                                    <img loading="lazy"
                                        src="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-grafana.png"
                                        data-original="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-grafana.png"
                                        data-at2x="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-grafana@2x.png"
                                        title="Prometheus data source" alt="Prometheus data source">
                                </picture>
                                <figcaption>Prometheus data source</figcaption>
                            </figure>

                            <figure class="">
                                <picture>
                                    <source
                                        srcset="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-grafana-demo.png 1x">
                                    <img loading="lazy"
                                        src="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-grafana-demo.png"
                                        data-original="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-grafana-demo.png"
                                        data-at2x="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-grafana-demo@2x.png"
                                        title="Sample dashboard OCI Demo" alt="Sample dashboard OCI Demo">
                                </picture>
                                <figcaption>Sample dashboard OCI Demo</figcaption>
                            </figure>
                        </li>
                        <li>
                            And here you can see the pushed metric from the Python script by name:
                            <picture class="">
                                <source
                                    srcset="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-grafana-metrics-browser.png 1x">
                                <img loading="lazy"
                                    src="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-grafana-metrics-browser.png"
                                    data-original="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-grafana-metrics-browser.png"
                                    data-at2x="https://raw.githubusercontent.com/oracle-devrel/devo.tutorials/main/assets/oci-monitoring-grafana-metrics-browser@2x.png"
                                    alt="Metric from Python script" title="Metric from Python script">
                            </picture>
                        </li>
                    </ul>


                </div>

                <div class="slide" id="slide-9">

                    <h2 class="slide__title"><span class="slide__num">10</span> Troubleshooting</h2>

                    <h3 id="docker-logs">Docker Logs<a class="header-link" href="#docker-logs" title="Permalink"><span
                                class="sr-only">Permalink</span><i class="fas fa-link"></i></a></h3>

                    <p>To verify that Steampipe is running properly:</p>

                    <div class="language-console highlighter-rouge">
                        <div class="highlight">
                            <pre class="highlight"><code><span class="go">docker logs steampipe
</span></code></pre>
                        </div>
                    </div>

                    <h3 id="steampipe-access-logs">Steampipe Access Logs<a class="header-link"
                            href="#steampipe-access-logs" title="Permalink"><span class="sr-only">Permalink</span><i
                                class="fas fa-link"></i></a></h3>

                    <p>The foreign data wrapper logs are stored locally (<em>not</em> in the Docker container) in the
                        directory <code class="language-plaintext highlighter-rouge">/home/steampipe/logs</code>:</p>

                    <div class="language-console highlighter-rouge">
                        <div class="highlight">
                            <pre class="highlight"><code><span class="go">drwx------. 11 steampipe steampipe     173 Aug  9 17:18 ..
-rw-------.  1      9193 root       756701 Aug  9 19:57 database-2021-08-09.log
drwxrwxr-x.  2 steampipe root           68 Aug 10 02:00 .
-rw-------.  1      9193 root      3411203 Aug 10 07:19 database-2021-08-10.log
</span></code></pre>
                        </div>
                    </div>



                </div>

                <div class="slide" id="slide-10">

                    <h2 class="slide__title"><span class="slide__num">11</span> What's next</h2>

                    <p>At this point, you should have your OCI monitoring solution up and running. Feel free to continue
                        extending and exploring its capabilities!</p>

                    <p>For more information about development with Oracle products, see:</p>

                    <ul>
                        <li><a
                                href="https://developer.oracle.com/?source=:ex:tb:::::WWMK211125P00018:WW_FY22_DevRel_DotBuild&amp;SC=:ex:tb:::::WWMK211125P00018:WW_FY22_DevRel_DotBuild&amp;pcode=WWMK211125P00018">Oracle
                                Developers Portal</a></li>
                        <li><a
                                href="https://www.oracle.com/cloud/?source=:ex:tb:::::WWMK211125P00018:WW_FY22_DevRel_DotBuild&amp;SC=:ex:tb:::::WWMK211125P00018:WW_FY22_DevRel_DotBuild&amp;pcode=WWMK211125P00018">Oracle
                                Cloud Infrastructure</a></li>
                    </ul>



                </div>

            </div>

            <!--- links -->

        </section>
    </div>
</article>