<div class="techArticleContainer TA01">

  <p class="textTA01">Using the AWS Database Migration Service to migrate to MySQL HeatWave</p>
  <p class="textTA01">Now let’s try something really fun. Let’s say you’ve already got an application using Amazon
    Aurora or RDS for
    MySQL and you want to migrate the database to MySQL HeatWave on AWS.</p>

  <p class="textTA01">First, we’ll need to have a MySQL DB System with HeatWave enabled, and a critical step is to
    confirm the database
    port configured during creation. The default is 3306 but we should double-check just to be certain:</p>

  <figure>
    <img
      src="https://raw.githubusercontent.com/oracle-devrel/devo-image-repository/Devo/images/AWS_HeatwaveV2/createmysql-dbsys-aws-mysqlhw-devrel1022.jpg"
      alt="Create DB System" title="Create DB System" />
    <figcaption>Create DB System</figcaption>
  </figure>

  <p class="textTA01">You can leave this browser tab open since we need to come back later and make an adjustment to
    the <em>Allowed
      client addresses</em></p>

  <p class="textTA01">Great! Now let’s head over to AWS.</p>

  <ol>
    <li>
      <p class="textTA01">Log in to your AWS console and use search for “DMS” — Database Migration Service, it’ll be
        the top result.
      </p>

      <figure>
        <img
          src="https://raw.githubusercontent.com/oracle-devrel/devo-image-repository/Devo/images/AWS_HeatwaveV2/awsdbs-migrationservice-search-devrel0622.png"
          alt="Migration Service" title="Migration Service" />
        <figcaption>Migration Service</figcaption>
      </figure>
    </li>
    <li>
      <p class="textTA01">Click <em>Create replication instance</em>.</p>

      <figure>
        <img
          src="https://raw.githubusercontent.com/oracle-devrel/devo-image-repository/Devo/images/AWS_HeatwaveV2/step2-create-replication-awshw-devrel0622.png"
          alt="" title="Create replication instance" />
      </figure>
    </li>
    <li>
      <p class="textTA01">Fill out a Name, an optional Descriptive Amazon Resource Name (ARN), and description. You
        may use whichever
        shape you like, but keep in mind the performance: cost ratio here. For <strong>engine version</strong>, the
        latest should be fine, as well as the default Allocated storage (unless you have a truly massive database, in
        which case, adjust accordingly).</p>

      <figure>
        <img
          src="https://raw.githubusercontent.com/oracle-devrel/devo-image-repository/Devo/images/AWS_HeatwaveV2/arn-form-repinstance-awshw-devrel0622.png"
          alt="ARN Form" title="ARN Form" />
        <figcaption>ARN Form</figcaption>
      </figure>
    </li>
    <li>
      <p class="textTA01">For VPC, choose one you have previously set up with the appropriate access controls for
        development work.
        Make sure it is publicly accessible. For the Multi AZ option, simply select <em>Dev or test workload</em> to
        use a single availability zone.</p>

      <figure>
        <img
          src="https://raw.githubusercontent.com/oracle-devrel/devo-image-repository/Devo/images/AWS_HeatwaveV2/step4-vpcsetup-awshw-devrel0622.png"
          alt="VPC" title="VPC" />
        <figcaption>VPC</figcaption>
      </figure>
    </li>
    <li>
      <p class="textTA01">Click to open the <em>Advanced security and network configurations</em>. The subnet group
        will follow the VPC
        you chose above, and the availability zone should correspond to the region you&#8217;re using. The security
        groups should be populated with any you created earlier, ensuring appropriate ports are configured for ingress
        / egress access. Also make sure the <em>Publicly accessible</em> checkbox is selected.</p>

      <figure>
        <img
          src="https://raw.githubusercontent.com/oracle-devrel/devo-image-repository/Devo/images/AWS_HeatwaveV2/step5-advanc-netsec-awshw-devrel0622.png"
          alt="Advanced security and network config" title="Advanced security and network congfig" />
        <figcaption>Advanced security and network config</figcaption>
      </figure>
    </li>
    <li>
      <p class="textTA01">It will take a few minutes for the replication instance to spin up. Coffee time!</p>

      <figure>
        <img
          src="https://raw.githubusercontent.com/oracle-devrel/devo-image-repository/Devo/images/AWS_HeatwaveV2/step6-creating-instance-awshw-wpex-devrel0622.png"
          alt="Replication instance" title="Replication instance" />
        <figcaption>Replication instance</figcaption>
      </figure>
    </li>
    <li>
      <p class="textTA01">Once it’s ready, we’ll need to get the Public IP address for our replication instance. You
        should see it in
        the table on the Replication Instances console.</p>

      <figure>
        <img
          src="https://raw.githubusercontent.com/oracle-devrel/devo-image-repository/Devo/images/AWS_HeatwaveV2/aws-dms-pubip-devrel1015.jpg"
          alt="Public IP" title="Public IP" />
        <figcaption>Public IP</figcaption>
      </figure>
    </li>
    <li>
      <p class="textTA01">Now it is time to establish a connection to both source and destination DB endpoints. Go to
        the Endpoints
        section. On the right you’ll see a <em>Create Endpoint</em> button, click it.</p>

      <figure>
        <img
          src="https://raw.githubusercontent.com/oracle-devrel/devo-image-repository/Devo/images/AWS_HeatwaveV2/step7a-awsdms-endpoints-awshw-wpex-devrel0622.png"
          alt="" title="Endpoints" />
      </figure>

      <figure>
        <img
          src="https://raw.githubusercontent.com/oracle-devrel/devo-image-repository/Devo/images/AWS_HeatwaveV2/step7b-create-endpoint-button-awshw-wpex-devrel0622.png"
          alt="" title="Create Endpoint button" />
      </figure>
    </li>
    <li>
      <p class="textTA01">Select Source endpoint, and check Select RDS DB Instance. You should see the RDS Instance
        field populate with
        what’s available to you.</p>

      <figure>
        <img
          src="https://raw.githubusercontent.com/oracle-devrel/devo-image-repository/Devo/images/AWS_HeatwaveV2/step8-create-endpoint-awshw-wpex-devrel0622.png"
          alt="Source endpoint" title="Source endpoint" />
        <figcaption>Source endpoint</figcaption>
      </figure>
    </li>
    <li>
      <p class="textTA01">For Endpoint configuration, you’ll have the identifier, ARN, and source engine pre-filled,
        but we want to
        provide the access to endpoint database information manually, so click that radio button. Then, enter the
        appropriate database information for the db you’re moving over.</p>

      <figure>
        <img
          src="https://raw.githubusercontent.com/oracle-devrel/devo-image-repository/Devo/images/AWS_HeatwaveV2/step9-endpoint-config-awshw-devrel0622.png"
          alt="Endpoint config" title="Endpoint configuration" />
        <figcaption>Endpoint config</figcaption>
      </figure>
    </li>
    <li>
      <p class="textTA01">You should now be able to test the endpoint connection below.</p>

      <p class="textTA01"><img
          src="https://raw.githubusercontent.com/oracle-devrel/devo-image-repository/Devo/images/AWS_HeatwaveV2/step10-testendpoint-awshw-wpex-devrel0622.png"
          alt="Test Endpoint" title="Test endpoint" />
      </p>
    </li>
    <li>
      <p class="textTA01">Next, we’ll create a second endpoint as our destination. To do this, we need to execute two
        actions in the
        MySQL HeatWave console. Return to the MySQL HeatWave on AWS Console, and click MySQL tab.</p>

      <figure>
        <img
          src="https://raw.githubusercontent.com/oracle-devrel/devo-image-repository/Devo/images/AWS_HeatwaveV2/mysql-endpointbtn-2-hwdevrel1022.jpg"
          alt="" title="MySQL DB Systems" />
      </figure>

      <p class="textTA01">Then, click on the DB System you wish to use and <em>Edit DB System</em>. Add the public IP
        address from the
        DMS Replication Instance to the <em>Allowed Client Addresses</em>, making sure to append /32 at the end. Click
        <em>Save</em>.
        Next, locate the Host Name value in the instance Summary section. Copy the string.
      </p>
    </li>
    <li>
      <p class="textTA01">Go back to the AWS DMS console and click to create another endpoint. This time we’ll create
        a Target endpoint
        (naturally).</p>

      <figure>
        <img
          src="https://raw.githubusercontent.com/oracle-devrel/devo-image-repository/Devo/images/AWS_HeatwaveV2/step12-create-endpoint-aws-awshw-wpex-devrel0622.png"
          alt="Create endpoint" title="Create endpoint" />
        <figcaption>Create endpoint</figcaption>
      </figure>
    </li>
    <li>
      <p class="textTA01">In Endpoint configuration, give it a name (identifier), choose MySQL under Target Engine.
        ARN is optional.
      </p>

      <figure>
        <img
          src="https://raw.githubusercontent.com/oracle-devrel/devo-image-repository/Devo/images/AWS_HeatwaveV2/step13-target-engin-awshw-wpex-devrel0622.png"
          alt="Target engine" title="Target engine" />
        <figcaption>Target engine</figcaption>
      </figure>
    </li>
    <li>
      <p class="textTA01">Once again, we’ll provide access information manually. The server name is the host name you
        previously
        copied. Port is 3306 (unless you chose another port). The username/password will match the one you created for
        the target database.</p>
    </li>
    <li>
      <p class="textTA01">Now we&#8217;ll create a migration task. </p>

      <ol>
        <li>On the nav, choose Tasks</li>
        <li>Create Task: Here&#8217;s where those endpoints come in handy!</li>
        <li>For now we&#8217;ll use default table mappings</li>
      </ol>
    </li>
  </ol>

  <p class="textTA01">After selecting the default table mappings, you should be able to save and run the task.</p>

  <p class="textTA01"><strong>Note:</strong> MySQL Shell is the recommended utility for exporting data from a source
    MySQL Server and
    importing it into a DB System/MySQL HeatWave on AWS. MySQL Shell dump and load utilities are purpose-built for use
    with MySQL DB Systems. For more on running queries with HeatWave, please refer to the <a target="_blank"
      class="textLinkTA01" href="https://dev.mysql.com/doc/heatwave/en/heatwave-running-queries.html">MySQL
      documentation</a>.</p>

  <h3 id="summary">Summary</h3>

  <p class="textTA01">As you can see, we were able to pretty easily migrate our data into HeatWave for incredibly fast
    (and efficient)
    analysis. No more complicated ETL’s and all that jazz, just use the AWS tools to migrate and you’re set.
    Multicloud FTW!</p>

  <p class="textTA01">Want to know more? Join the discussion in our <a target="_blank" class="textLinkTA01"
      href="https://bit.ly/odevrel_slack">public Slack channel</a>!
  </p>

</div>